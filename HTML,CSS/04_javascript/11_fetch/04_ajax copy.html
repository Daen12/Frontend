<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>JSON 파일 이용</title>
  </head>

  <body>
    <h1>JSON 파일을 읽어 멤버를 호출해보자</h1>
    <textarea id="student" cols="30" rows="10"></textarea>
    <!-- 고전방식 -->
    <input type="button" value="출석" onclick="requestMsg()" />
    <script>
      fetch("./data/member.json")
        .then((res) => res.json())
        .then((arr) => {
          studentArea.value += `총학생수 : ${arr.length}명\n`;
          for (student of arr) {
            studentArea.value += `id : ${student.id}\nname:${student.name}\n`;
          }
        });
      // let xhr;
      const studentArea = document.getElementById("student");

      // function requestMsg() {
      //   xhr = new XMLHttpRequest();
      //   xhr.onreadystatechange = callbackFunc;
      //   xhr.open("GET", "./data/member.json");
      //   xhr.send();
      // }

      // function callbackFunc() {
      //   if (xhr.readyState == 4) {
      //     if (xhr.status == 200) {
      //       let stList = JSON.parse(xhr.response);
      //       console.log(stList);
      //       studentArea.value += "총학생수 : " + stList.length + "명\n";
      //       for (let i = 0; i < stList.length; i++) {
      //         let st = stList[i];
      //         studentArea.value += `id : ${st.id}\nname : ${st.name}\n`;
      //       }
      //     }
      //   }
      // }
    </script>
  </body>
</html>
